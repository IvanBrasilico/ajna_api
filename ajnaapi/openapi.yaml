openapi: 3.0.1
info:
  title: API-AJNA
  description: API para acesso de outras aplicações a dados do AJNA
  version: "1.0a"
servers:
  - url: /ajnaapi/api
paths:
  /login:
    post:
      summary: retorna token JWT
      operationId: authentication.generate_token
      requestBody:
        description: Usuario e Senha
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthenticationJson'
      responses:
        '200':
          description: JWT token
          content:
            'text/plain':
              schema:
                type: string
  /secret:
    get:
      summary: Return secret string
      operationId: authentication.get_secret
      responses:
        '200':
          description: secret response
          content:
            'text/plain':
              schema:
                type: string
      security:
        - jwt: ['secret']
  /grid_data:
    post:
      requestBody:
        description: Lista de eventos maiores que um ID ou Data
        content:
          application/json:
            schema:
              type: object
              properties:
                query:
                  type: aplication/json
                  description: Campos do filtro a aplicar - padrão MongoDB
                  required: true
                projection:
                  type: aplication/json
                  description: Campos a retornar - padrão MongoDB
                  required: true
      responses:
        200:
          description:
          content:
            application/json:
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /image/{id}:
    get:
      parameters:
        - name: id
          in: path
          description: id da imagem do escaneamento no banco de dados AJNA
          required: true
          schema:
            type: string
      responses:
        200:
          description:
          content:
            image/jpeg:
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /summary_aniita/{ce_mercante}:
    get:
      parameters:
        - name: ce_mercante
          in: path
          description: número do conhecimento de transporte NIC CE Mercante
          required: true
          schema:
            type: string
      responses:
        200:
          description: Lista de contêineres do CE, algumas informações do sistema Mercante, id das imagens do CE
          content:
            aplication/json:
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /conhecimentos/{numeroCEmercante}:
    get:
      parameters:
        - name: numeroCEmercante
          in: path
          description: Numero do CE Mercante no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/conhecimentos'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /conhecimentos/new/{datamodificacao}:
    get:
      parameters:
        - name: datamodificacao
          in: path
          description: Data inicial de pesquisa
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/conhecimentos'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /conhecimentos:
    get:
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/conhecimentos'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /manifestos/{numero}:
    get:
      parameters:
        - name: numero
          in: path
          description: Numero do Manifesto no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/manifestos'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /manifestos/new/{datamodificacao}:
    get:
      parameters:
        - name: datamodificacao
          in: path
          description: Data inicial de pesquisa
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/manifestos'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /manifestos:
    get:
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/manifestos'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /itens/{conhecimento}:
    get:
      parameters:
        - name: numero
          in: path
          description: Numero do Manifesto no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/itens'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /itens/{conhecimento}/{sequencial}:
    get:
      parameters:
        - name: numero
          in: path
          description: Numero do Manifesto no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/itens'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /itens/new/{datamodificacao}:
    get:
      parameters:
        - name: datamodificacao
          in: path
          description: Data inicial de pesquisa
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/itens'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /itens:
    get:
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/itens'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /NCMitem/{conhecimento}:
    get:
      parameters:
        - name: numero
          in: path
          description: Numero do Manifesto no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NCMitem'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /NCMitem/{conhecimento}/{sequencial}:
    get:
      parameters:
        - name: numero
          in: path
          description: Numero do Manifesto no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NCMitem'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /NCMitem/new/{datamodificacao}:
    get:
      parameters:
        - name: datamodificacao
          in: path
          description: Data inicial de pesquisa
          required: true
          schema:
            type: string
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NCMitem'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /NCMitem:
    get:
      responses:
        200:
          description: Conhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NCMitem'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /conteineresVazios/{manifesto}:
    get:
      parameters:
        - name: manifesto
          in: path
          description: Numero do Manifesto no sistema original
          required: true
          schema:
            type: string
      responses:
        200:
          description: Lista de Conteineres Vazios
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/conteineresVazios'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /conteineresVazios/new/{datamodificacao}:
    get:
      parameters:
        - name: datamodificacao
          in: path
          description: Data inicial de pesquisa
          required: true
          schema:
            type: string
      responses:
        200:
          description: Lista de Conteineres Vazios
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/conteineresVazios'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /conteineresVazios:
    get:
      responses:
        200:
          description: Lista de Conteineres Vazios
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/conteineresVazios'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /acessoveiculo/{id}:
    get:
      parameters:
        - name: id
          in: path
          description: Id do Evento
          required: true
          schema:
            type: string
      responses:
        200:
          description: Evento Acesso Veiculo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcessoVeiculo'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /acessoveiculo:
    post:
      summary: Recebe Evento acessoveiculo
      operationId: authentication.generate_token
      requestBody:
        description: Conteúdo do Evento
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcessoVeiculo'
      responses:
        201:
          description: Resposta em caso de sucesso
          content:
            application/json:
              schema: {}
        500:
          description: Erro
          content:
            application/json:
              schema: {}
      security:
        - jwt: ['secret']
  /pesagemveiculo/{id}:
    get:
      parameters:
        - name: id
          in: path
          description: Id do Evento
          required: true
          schema:
            type: string
      responses:
        200:
          description: Evento Pesagem Veiculo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PesagemVeiculo'
        400:
          description: Erro
          content: {}
        404:
          description: Não encontrado para filtro atual.
          content: {}
      security:
        - jwt: ['secret']
  /pesagemveiculo:
    post:
      summary: Recebe Evento pesagemveiculo
      operationId: authentication.generate_token
      requestBody:
        description: Conteúdo do Evento
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PesagemVeiculo'
      responses:
        201:
          description: Resposta em caso de sucesso
          content:
            application/json:
              schema: {}
        500:
          description: Erro
          content:
            application/json:
              schema: {}
      security:
        - jwt: ['secret']
components:
  securitySchemes:
    jwt:
      type: http
      scheme: bearer
      bearerFormat: JWT
      x-bearerInfoFunc: authentication.decode_token
  schemas:
    AuthenticationJson:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
    conhecimentos:
      type: object
      properties:
        codigoEmpresaNavegacao:
          type: string
        codigoTerminalCarregamento:
          type: string
        consignatario:
          type: string
        cubagem:
          type: string
        dataAtualizacao:
          type: string
        dataEmissao:
          type: string
        descricao:
          type: string
        embarcador:
          type: string
        horaAtualizacao:
          type: string
        indicadorShipsConvenience:
          type: string
        manifestoCE:
          type: string
        numeroCEMaster:
          type: string
        numeroCEmercante:
          type: string
        paisDestinoFinalMercante:
          type: string
        portoDestFinal:
          type: string
        portoOrigemCarga:
          type: string
        tipoBLConhecimento:
          type: string
        tipoTrafego:
          type: string
    manifestos:
      type: object
      properties:
        numero:
          type: string
    itens:
      type: object
      properties:
        numeroCEmercante:
          type: string
        numeroSequencialItemCarga:
          type: string
        codigoConteiner:
          type: string
        NCM:
          type: string
    NCMitem:
      type: object
      properties:
        numeroCEmercante:
          type: string
        numeroSequencialItemCarga:
          type: string
        identicacaoNCM:
          type: string
    conteineresVazios:
      type: object
      properties:
        manifesto:
          type: string
        idConteinerVazio:
          type: string
    AcessoVeiculo:
      type: object
      properties:
        id:
          type: number
        cnpjTransportador:
          type: string
        codRecintoDestino:
          type: integer
        contingencia:
          type: boolean
        cpfOperOcor:
          type: string
        cpfOperReg:
          type: string
        direcao:
          type: string
        dtHrAgenda:
          type: string
        dtHrOcorrencia:
          type: string
        dtHrRegistro:
          type: string
        gate:
          type: string
        idEvento:
          type: string
        listaConteineresUld:
          properties: listaConteineresUld
          type: object
        login:
          type: string
        mercadoria:
          type: string
        modal:
          type: string
        motorista_cpf:
          type: string
        motorista_nome:
          type: string
        motorista_protocoloCredenciamento:
          type: string
        nmtransportador:
          type: string
        ocrPlaca:
          type: boolean
        oogDimensao:
          type: boolean
        oogPeso:
          type: boolean
        operacao:
          type: string
        placa:
          type: string
        protocoloAgenda:
          type: string
        protocoloEventoRetifCanc:
          type: string
        recinto:
          type: string
        tipoGranel:
          type: string
    ConteinerUld:
      type: object
      properties:
        id:
          type: number
        avaria:
          type: boolean
        cnpjCliente:
          type: string
        destinoCarga:
          type: string
        imoNavio:
          type: string
        nmCliente:
          type: string
        num:
          type: string
        numBooking:
          type: string
        ocrNum:
          type: boolean
        portoDescarga:
          type: string
        tipo:
          type: string
        vazio:
          type: boolean
    PesagemVeiculo:
      type: object
      properties:
        id:
          type: number
        balanca:
          type: string
        capturaAutoPeso:
          type: boolean
        contingencia:
          type: boolean
        cpfOperOcor:
          type: string
        cpfOperReg:
          type: string
        dtHrOcorrencia:
          type: string
        dtHrRegistro:
          type: string
        dutos:
          type: string
        idEvento:
          type: string
        listaSemirreboque:
          properties: listaSemirreboque
          type: object
        numConteinerUld:
          type: string
        pesoBrutoBalanca:
          type: number
        pesoBrutoManifesto:
          type: number
        placa:
          type: string
        protocoloEventoRetifCanc:
          type: string
        recinto:
          type: string
        taraConjunto:
          type: number
        taraConteinerUld:
          type: number
        tipoConteinerUld:
          type: string
        volume:
          type: number
    Semirreboque:
      type: object
      properties:
        id:
          type: number
        placa:
          type: string
        tara:
          type: number
